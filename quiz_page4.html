<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quiz - Page 4</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      background: #f4f4f4;
    }
    .question {
      margin-bottom: 20px;
      padding: 15px;
      background: white;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.05);
    }
    button {
      padding: 10px 20px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    #result {
      margin-top: 20px;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>

  <h2>Quiz – Page 4 of 4</h2>

  <div class="question">
    <p>19. What is the standard Statewide labor warranty?</p>
    <label><input type="radio" name="q19" value="2 years labor"> 2 years labor</label><br>
    <label><input type="radio" name="q19" value="5 years labor + all product warranties"> 5 years labor + all product warranties</label><br>
    <label><input type="radio" name="q19" value="Lifetime labor"> Lifetime labor</label>
  </div>

  <div class="question">
    <p>20. What building codes must our products comply with?</p>
    <label><input type="radio" name="q20" value="California Fire Code"> California Fire Code</label><br>
    <label><input type="radio" name="q20" value="International Building Code"> International Building Code</label><br>
    <label><input type="radio" name="q20" value="FL Wind Rating and HVHZ"> FL Wind Rating and HVHZ</label>
  </div>

  <div class="question">
    <p>21. What should the agent help the customer decide between?</p>
    <label><input type="radio" name="q21" value="Explain pricing first"> Explain pricing first</label><br>
    <label><input type="radio" name="q21" value="Help them choose between Vinyl and Aluminum"> Help them choose between Vinyl and Aluminum</label><br>
    <label><input type="radio" name="q21" value="Offer financing options"> Offer financing options</label>
  </div>

  <div class="question">
    <p>22. What ensures a secure perimeter seal?</p>
    <label><input type="radio" name="q22" value="Window caulk"> Window caulk</label><br>
    <label><input type="radio" name="q22" value="Spray foam only"> Spray foam only</label><br>
    <label><input type="radio" name="q22" value="Two-part foam perimeter seal"> Two-part foam perimeter seal</label>
  </div>

  <div class="question">
    <p>23. What type of roof shingles are used?</p>
    <label><input type="radio" name="q23" value="Clay tile"> Clay tile</label><br>
    <label><input type="radio" name="q23" value="Architectural shingles"> Architectural shingles</label><br>
    <label><input type="radio" name="q23" value="Asphalt flat sheet"> Asphalt flat sheet</label>
  </div>

  <div class="question">
    <p>24. What is an optional feature for the cap sheet layer?</p>
    <label><input type="radio" name="q24" value="Color matching"> Color matching</label><br>
    <label><input type="radio" name="q24" value="Nail striping"> Nail striping</label><br>
    <label><input type="radio" name="q24" value="Reflective coating"> Reflective coating</label>
  </div>

  <button onclick="submitQuiz()">Submit Quiz</button>
  <p id="result"></p>

  <script>
    function submitQuiz() {
      const name = localStorage.getItem("quiz_name") || prompt("Please enter your name:");
      if (!name) {
        alert("Name is required.");
        return;
      }

      const answers = {};
      for (let i = 1; i <= 24; i++) {
        answers[`q${i}`] = localStorage.getItem(`q${i}`) || "No answer";
      }

      for (let i = 19; i <= 24; i++) {
        const qName = `q${i}`;
        const selected = document.querySelector(`input[name="${qName}"]:checked`);
        if (selected) {
          answers[qName] = selected.value;
          localStorage.setItem(qName, selected.value);
        }
      }

      let score = 0;
      const correctAnswers = {
        q1: "John Dyda",
        q2: "2015",
        q3: "Garage Doors",
        q4: "Optimize workflows and profitability",
        q5: "They must know our business model and product",
        q6: "Script",
        q7: "Frame the Call",
        q8: "Set Clear Expectations",
        q9: "All decision-makers must be present",
        q10: "To see and measure the job",
        q11: "The underlayment is SBS-based",
        q12: "Architectural shingles",
        q13: "The lead is inside sales rep’s name",
        q14: "Check if it's duplicate and disposition",
        q15: "Apologize and reset expectations",
        q16: "Realistic and matched to service area",
        q17: "Yes, if all products are available",
        q18: "Skip logic",
        q19: "5 years labor + all product warranties",
        q20: "FL Wind Rating and HVHZ",
        q21: "Help them choose between Vinyl and Aluminum",
        q22: "Two-part foam perimeter seal",
        q23: "Architectural shingles",
        q24: "Reflective coating"
      };

      for (let i = 1; i <= 24; i++) {
        if (answers[`q${i}`] === correctAnswers[`q${i}`]) score++;
      }

      const scriptURL = "https://script.google.com/macros/s/AKfycbyLxw42HfEGx-6VLc1LCRuuwCKRIj6SdSTBsxtecgkCeyVDrjEWz1oFKwIdrQa5YG9iJA/exec";
      const payload = JSON.stringify({ name, score, answers });

      fetch(scriptURL, {
        method: "POST",
        headers: { "Content-Type": "text/plain" },
        body: payload
      })
      .then(res => res.text())
      .then(text => {
        document.getElementById("result").innerText = `✅ Submitted! You scored ${score}/24.`;
      })
      .catch(err => {
        console.error("Error submitting quiz:", err);
        alert("Submission failed. Please try again.");
      });
    }
  </script>
</body>
</html>
